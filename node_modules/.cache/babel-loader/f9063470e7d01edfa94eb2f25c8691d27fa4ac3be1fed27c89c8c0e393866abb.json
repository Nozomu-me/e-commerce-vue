{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/aouassit/Desktop/e-commerce-vue/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"C:/Users/aouassit/Desktop/e-commerce-vue/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/Users/aouassit/Desktop/e-commerce-vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport ecomService from '@/services/ecomService';\nimport { mapState } from 'vuex';\nimport InputField from '../components/InputField.vue';\nexport default {\n  mounted: function mounted() {\n    var _this = this;\n    console.log('register mounted');\n    ecomService.getCustomers(function (res) {\n      console.log('res = ', res.data);\n      _this.customers = res.data;\n    });\n  },\n  created: function created() {\n    if (localStorage.getItem('email') !== null) this.$router.push({\n      name: 'home'\n    });\n  },\n  data: function data() {\n    return {\n      user: this.createUser(),\n      errorEmail: false,\n      customers: []\n    };\n  },\n  components: {\n    InputField: InputField\n  },\n  computed: mapState({\n    customer: function customer(state) {\n      return state.customer;\n    }\n  }),\n  methods: {\n    createUser: function createUser() {\n      return {\n        firstName: '',\n        lastName: '',\n        email: '',\n        phoneNumber: ''\n      };\n    },\n    submit: function submit() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res, _iterator, _step, cus;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              console.log('hna = ', _this2.customers);\n              _context.next = 3;\n              return ecomService.getCustomers();\n            case 3:\n              res = _context.sent;\n              console.log('====== res === ', res.data);\n              //   ecomService.getCustomers((res) => {\n              //     console.log('res = ', res.data);\n              _this2.customers = res;\n              //   });\n              _iterator = _createForOfIteratorHelper(_this2.customers);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  cus = _step.value;\n                  if (cus.email === _this2.user.email) _this2.errorEmail = true;else _this2.errorEmail = false;\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              if (_this2.errorEmail === false) {\n                _this2.$store.dispatch('registerCustomer', _this2.user);\n                localStorage.setItem('email', _this2.customer.email);\n                // this.$router.go(0);\n              }\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["ecomService","mapState","InputField","mounted","_this","console","log","getCustomers","res","data","customers","created","localStorage","getItem","$router","push","name","user","createUser","errorEmail","components","computed","customer","state","methods","firstName","lastName","email","phoneNumber","submit","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_iterator","_step","cus","wrap","_callee$","_context","prev","next","sent","_createForOfIteratorHelper","s","n","done","value","err","e","f","$store","dispatch","setItem","stop"],"sources":["src/views/RegisterView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"image\">\r\n      <img\r\n        src=\"https://www.hcpc-uk.org/globalassets/image-library/icons/icon-register-800x600.gif\"\r\n      />\r\n    </div>\r\n    <div class=\"form-div\">\r\n      <form @submit.prevent=\"submit\">\r\n        <InputField\r\n          class=\"input\"\r\n          placeholder=\"First Name\"\r\n          @message=\"user.firstName = $event\"\r\n        ></InputField>\r\n        <InputField\r\n          class=\"input\"\r\n          placeholder=\"Last Name\"\r\n          @message=\"user.lastName = $event\"\r\n        ></InputField>\r\n        <InputField\r\n          class=\"input\"\r\n          placeholder=\"Email\"\r\n          @message=\"user.email = $event\"\r\n        ></InputField>\r\n        <small v-show=\"errorEmail\">This email is already used</small>\r\n        <InputField\r\n          class=\"input\"\r\n          placeholder=\"Phone Number\"\r\n          @message=\"user.phoneNumber = $event\"\r\n        ></InputField>\r\n        <input type=\"submit\" class=\"btn\" value=\"Register\" />\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ecomService from '@/services/ecomService';\r\nimport { mapState } from 'vuex';\r\nimport InputField from '../components/InputField.vue';\r\nexport default {\r\n  mounted() {\r\n    console.log('register mounted');\r\n    ecomService.getCustomers((res) => {\r\n      console.log('res = ', res.data);\r\n      this.customers = res.data;\r\n    });\r\n  },\r\n  created() {\r\n    if (localStorage.getItem('email') !== null)\r\n      this.$router.push({ name: 'home' });\r\n  },\r\n  data() {\r\n    return {\r\n      user: this.createUser(),\r\n      errorEmail: false,\r\n      customers: [],\r\n    };\r\n  },\r\n  components: {\r\n    InputField,\r\n  },\r\n  computed: mapState({\r\n    customer: (state) => state.customer,\r\n  }),\r\n  methods: {\r\n    createUser() {\r\n      return {\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        phoneNumber: '',\r\n      };\r\n    },\r\n    async submit() {\r\n      console.log('hna = ', this.customers);\r\n      let res = await ecomService.getCustomers();\r\n      console.log('====== res === ', res.data);\r\n      //   ecomService.getCustomers((res) => {\r\n      //     console.log('res = ', res.data);\r\n      this.customers = res;\r\n      //   });\r\n      for (let cus of this.customers) {\r\n        if (cus.email === this.user.email) this.errorEmail = true;\r\n        else this.errorEmail = false;\r\n      }\r\n      if (this.errorEmail === false) {\r\n        this.$store.dispatch('registerCustomer', this.user);\r\n        localStorage.setItem('email', this.customer.email);\r\n        // this.$router.go(0);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nsmall {\r\n  color: red;\r\n}\r\n.container {\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 20px;\r\n  /* background-color: aqua; */\r\n  /* height: 100vh; */\r\n  display: flex;\r\n}\r\n.image {\r\n  width: 50%;\r\n  height: 100%;\r\n}\r\nimg {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.form-div {\r\n  width: 50%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 30px;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.input {\r\n  width: 100%;\r\n  max-width: 600px;\r\n}\r\n.btn {\r\n  align-self: center;\r\n  border: none;\r\n  background-color: #5d3fd3;\r\n  padding: 15px 20px;\r\n  color: white;\r\n  font-size: 20px;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  opacity: 0.7;\r\n  width: 150px;\r\n}\r\n.btn:hover {\r\n  opacity: 1;\r\n}\r\n\r\n@media (max-width: 800px) {\r\n  .container {\r\n    flex-direction: column;\r\n  }\r\n  .image {\r\n    width: 100%;\r\n    height: 50%;\r\n  }\r\n  .form-div {\r\n    width: 100%;\r\n    height: 50%;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;;;AAqCA,OAAAA,WAAA;AACA,SAAAC,QAAA;AACA,OAAAC,UAAA;AACA;EACAC,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IACAC,OAAA,CAAAC,GAAA;IACAN,WAAA,CAAAO,YAAA,WAAAC,GAAA;MACAH,OAAA,CAAAC,GAAA,WAAAE,GAAA,CAAAC,IAAA;MACAL,KAAA,CAAAM,SAAA,GAAAF,GAAA,CAAAC,IAAA;IACA;EACA;EACAE,OAAA,WAAAA,QAAA;IACA,IAAAC,YAAA,CAAAC,OAAA,oBACA,KAAAC,OAAA,CAAAC,IAAA;MAAAC,IAAA;IAAA;EACA;EACAP,IAAA,WAAAA,KAAA;IACA;MACAQ,IAAA,OAAAC,UAAA;MACAC,UAAA;MACAT,SAAA;IACA;EACA;EACAU,UAAA;IACAlB,UAAA,EAAAA;EACA;EACAmB,QAAA,EAAApB,QAAA;IACAqB,QAAA,WAAAA,SAAAC,KAAA;MAAA,OAAAA,KAAA,CAAAD,QAAA;IAAA;EACA;EACAE,OAAA;IACAN,UAAA,WAAAA,WAAA;MACA;QACAO,SAAA;QACAC,QAAA;QACAC,KAAA;QACAC,WAAA;MACA;IACA;IACAC,MAAA,WAAAA,OAAA;MAAA,IAAAC,MAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAA1B,GAAA,EAAA2B,SAAA,EAAAC,KAAA,EAAAC,GAAA;QAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACArC,OAAA,CAAAC,GAAA,WAAAwB,MAAA,CAAApB,SAAA;cAAA8B,QAAA,CAAAE,IAAA;cAAA,OACA1C,WAAA,CAAAO,YAAA;YAAA;cAAAC,GAAA,GAAAgC,QAAA,CAAAG,IAAA;cACAtC,OAAA,CAAAC,GAAA,oBAAAE,GAAA,CAAAC,IAAA;cACA;cACA;cACAqB,MAAA,CAAApB,SAAA,GAAAF,GAAA;cACA;cAAA2B,SAAA,GAAAS,0BAAA,CACAd,MAAA,CAAApB,SAAA;cAAA;gBAAA,KAAAyB,SAAA,CAAAU,CAAA,MAAAT,KAAA,GAAAD,SAAA,CAAAW,CAAA,IAAAC,IAAA;kBAAAV,GAAA,GAAAD,KAAA,CAAAY,KAAA;kBACA,IAAAX,GAAA,CAAAV,KAAA,KAAAG,MAAA,CAAAb,IAAA,CAAAU,KAAA,EAAAG,MAAA,CAAAX,UAAA,aACAW,MAAA,CAAAX,UAAA;gBACA;cAAA,SAAA8B,GAAA;gBAAAd,SAAA,CAAAe,CAAA,CAAAD,GAAA;cAAA;gBAAAd,SAAA,CAAAgB,CAAA;cAAA;cACA,IAAArB,MAAA,CAAAX,UAAA;gBACAW,MAAA,CAAAsB,MAAA,CAAAC,QAAA,qBAAAvB,MAAA,CAAAb,IAAA;gBACAL,YAAA,CAAA0C,OAAA,UAAAxB,MAAA,CAAAR,QAAA,CAAAK,KAAA;gBACA;cACA;YAAA;YAAA;cAAA,OAAAa,QAAA,CAAAe,IAAA;UAAA;QAAA,GAAArB,OAAA;MAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}